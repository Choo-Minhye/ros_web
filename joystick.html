<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <!-- <script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script> -->
    <!-- <script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>1 -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.7.3/nipplejs.js"></script>

    <script type="text/javascript">
        // Connecting to ROS
        // -----------------

        // var ros = new ROSLIB.Ros({
        //     url: 'ws://localhost:9090'
        // });

        // ros.on('connection', function () {
        //     console.log('Connected to websocket server.');
        // });

        // ros.on('error', function (error) {
        //     console.log('Error connecting to websocket server: ', error);
        // });

        // ros.on('close', function () {
        //     console.log('Connection to websocket server closed.');
        // });



        createJoystick = function () {
            var options = {
                zone: document.getElementById('zone_joystick'),
                threshold: 0.1,
                position: { left: 50 + '%' },
                mode: 'static',
                size: 150,
                color: '#000000',
            };
            manager = nipplejs.create(options);

            linear_speed = 0;
            angular_speed = 0;

            self.manager.on('start', function (event, nipple) {
                console.log("Movement start");
                //   timer = setInterval(function () {
                //       move(linear_speed, angular_speed);
                //     }, 25);
            });

            self.manager.on('move', function (event, nipple) {
                console.log("Moving");
            });

            self.manager.on('end', function () {
                console.log("Movement end");
                //   self.move(0, 0);
                // if (timer) {
                    // clearInterval(timer);
                // }
                // self.move(0, 0);


            });
        }
        window.onload = function () {
            createJoystick();
        }

// manager.on('start', function (event, nipple) {
//   timer = setInterval(function () {
//     move(linear_speed, angular_speed);
//   }, 25);
// });

//   function runAnimation()
//   {
//     //console.log('runAnimation called');
//     window.requestAnimationFrame(runAnimation);

//     var gamepads = navigator.getGamepads();

//     for (var i = 0; i < gamepads.length; ++i)
//     {
//         var pad = gamepads[i];
//         // console.log('id', pad.id);
//         // console.log('index', pad.index);
//         console.log('button 1', pad.buttons[0]);
//         console.log('axes', pad.axes[0], pad.axes[1], pad.axes[2], pad.axes[3]);
//     }
//   }

//  window.requestAnimationFrame(runAnimation);

    </script>

    <!-- <style>
        body { padding:0px; margin:0px; }

        #divPosition {  
        
          background-color: #00D8FF;
          border: 1px solid #5D5D5D;
          position:absolute;
          height:300px;
          width:400px;
          margin:-150px 0px 0px -200px;
          top: 50%;
          left: 50%;
          padding: 5px;
        }
    </style> -->

</head>

<body>
    <h1>Joystick Experiments</h1>
    <div class="col-md-12">
        <div id="zone_joystick" style="position: absolute; top: 40%; left: 50%; "></div>
    </div>
    <!-- <div id = "divPosition"></div> -->
</body>

</html>